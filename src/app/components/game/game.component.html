<div class="game-container">
    <h1 class="game-title">Adivinhe o Número</h1>
    <p class="game-instructions">
        Tente adivinhar um número entre 1 e 100.
        <br> 
        Você tem {{ tentativasMaximas }} tentativas!
    </p>

    <div *ngIf="!estadoDoJogo.jogoEncerrado" class="game-form-container">
        <form [formGroup]="formularioDoJogo" (ngSubmit)="aoEnviar()" class="game-form">
            <div class="form-group">
                <label for="chute" class="form-label">Seu palpite:</label>
                <input type="number" id="chute" formControlName="chute" class="form-input"
                    [class.invalid]="chute.invalid && (chute.dirty || chute.touched)"
                    placeholder="Digite um número entre 1-100">

                <div *ngIf="chute.invalid && (chute.dirty || chute.touched)" class="error-messages">
                    <div *ngIf="chute.hasError('required')">Campo obrigatório</div>
                    <div *ngIf="chute.hasError('min') || chute.hasError('max')">
                        O número deve estar entre 1 e 100
                    </div>
                    <div *ngIf="chute.hasError('pattern')">Apenas números são permitidos</div>
                </div>
            </div>

            <button type="submit" class="submit-button" [disabled]="formularioDoJogo.invalid || estadoDoJogo.jogoEncerrado">
                Enviar Palpite
            </button>
        </form>

        <div class="game-info">
            <p>Tentativas restantes: {{ estadoDoJogo.tentativasRestantes }}</p>
            <div class="progress-bar">
                <div class="progress" [style.width.%]="obterPorcentagemDeTentativas()"></div>
            </div>
            <p *ngIf="estadoDoJogo.historicoDeTentativas.length > 0">
                Tentativas anteriores: {{ estadoDoJogo.historicoDeTentativas.join(', ') }}
            </p>
        </div>
    </div>

    <div *ngIf="estadoDoJogo.mensagem" class="feedback feedback-message" [class.success]="estadoDoJogo.jogoVencido"
        [class.error]="estadoDoJogo.jogoEncerrado && !estadoDoJogo.jogoVencido">
        {{ estadoDoJogo.mensagem }}
    </div>

    <div *ngIf="estadoDoJogo.jogoEncerrado" class="game-actions">
        <button (click)="restartGame()" class="restart-button">Jogar Novamente</button>
    </div>
</div>